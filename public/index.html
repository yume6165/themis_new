<!DOCTYPE html>
<html>
<head>
    <title>THEMIS</title>
    <link rel="stylesheet" href="./main.css">
    <script src="https://unpkg.com/vue"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
</head>
<body>
    <script>
    //ここに全体の処理をかく
    </script>

    <!-1つ目のアプリケーション ファイルの読み込み-!>
    <div id="left_menu">
        <div>
        <div class="main_title">Menu</div>
        <div class="menu_box">
            <input id="acd-check3" class="acd-check" type="checkbox"></input>
            <label class="acd-label" for="acd-check3"><i class="fas fa-cog"></i> General</label>
            <div class="acd-content">
                <div class="subtitle">Wound Data</div>
                    <input v-model="target_url" placeholder="Input target data's url">{{target_url}}</input></br>
                    <input v-model="precedents_url" placeholder="Input precedents' url">{{precedents_url}}</input></br>

                    <button>
                            Reload wound data
                    </button>

                <div class="subtitle">Contexts</div>

                <div v-for="item1 in contexts" :key="item1.context">
                    <input type="color" v-model="item1.context_color" value={{item1.context_color}}>
                    <input v-model="item1.context" placeholder="item1.context">{{item1.context}}</input></br>
                    <input v-model="item1.context_data" placeholder="item1.context_data">{{item1.context_data}}</input></br>
                    <table><tr><td v-for="item2 in features" :key="item2.feature"><input type="checkbox">{{item2.feature}}</input></td></tr></table></br>
                    <button>
                            Reload context
                    </button></br></br>
                </div>

                <button>
                        Add context
                </button></br></br>


            </div>
            </div>
        </div>
    </div>

    <script>
    var left_menu = new Vue({
        el: '#left_menu',
        data: {
            target_url: '/Users/asayamayume/Desktop/themis_new/public/results/original_img/ori_img_0.jpg',
            precedents_url: '/Users/asayamayume/Desktop/themis_new/public/results/precedents_img/',

            contexts:[
                {context:'No_context',
                    context_data: '/Users/asayamayume/Desktop/themis_new/public/results/output_file/anken_mds/0_no_context.csv',
                    context_color: "#F0A58D"},
                {context:'Incision_context',
                    context_data: '/Users/asayamayume/Desktop/themis_new/public/results/output_file/anken_mds/1_incision_context.csv',
                    context_color: "#F0CC97"},
                {context:'Contusion_context',
                    context_data: '/Users/asayamayume/Desktop/themis_new/public/results/output_file/anken_mds/2_contusion_context.csv',
                    context_color: "#CE7FF0"},
                {context:'Stab_context',
                    context_data: '/Users/asayamayume/Desktop/themis_new/public/results/output_file/anken_mds/3_stab_context.csv',
                    context_color:"#67F0CC"}
            ],

            features:[
                {feature: 'openness'},
                {feature: 'irregular_contour'},
                {feature: 'irregular_tip'},
                {feature: 'straight_contour'},
                {feature: 'sharp_tip'},
                {feature: 'thick_tip'},
                {feature: 'ovality'},
                {feature: 'l'},
                {feature: 'a'},
                {feature: 'b'},
                {feature: 'x'},
                {feature: 'y'},
                {feature: 'z'},
                {feature: 'd'}
            ]
        }
    })

    </script>


    <!-2つ目のアプリケーション　相関グラフの表示-!>
    <div id="mds_view">
        <svg id="mds_view_area" width="100%" height="100%" style="background-color: blue"></svg>
        <div id="mds_option">
            <div id="context_button"></div>
        </div>
    </div>

    <script>
    var mds_view = new Vue({
        el: '#mds_view',
        data: {
        message: 'You loaded this page on ' + new Date().toLocaleString()
        }
    })

    var svg = d3.select("#mds_view_area");

    var w = $("#mds_view_area").width();
    var h = $("#mds_view_area").height();

    d3.select("div").append("p").text("svg width x height : " + w + " x " + h);

    // 入力データは[x座標、y座標、値(円の大きさ)]
    const dataset = [
        [1, 1, 50], [1, 2, 25], [1, 3, 10], [2, 1, 50], [2, 2, 25], [2, 3, 10], [3, 1, 50], [3, 2, 25], [3, 3, 10]
    ];

    // 入力ドメインと出力レンジをマッピングさせたスケール関数を定義
    // padding の分だけレンジを狭める
    const padding = d3.max(dataset, function (d) { return d[2]; });

    const xScale = d3.scaleLinear()
        .domain([0, d3.max(dataset, function (d) { return d[0] + 1; })])
        .range([padding, w - padding]);

    const yScale = d3.scaleLinear()
        .domain([0, d3.max(dataset, function (d) { return d[1] + 1; })])
        .range([padding, h - padding]);

    // 円を描画
    svg.selectAll("circle")
        .data(dataset)
        .enter()
        .append("circle")
        .attr("fill", "white")
        .attr("cx", function (d) {
            return xScale(d[0]);
        })
        .attr("cy", function (d) {
            return yScale(d[1]);
        })
        .attr("r", function (d) {
            return d[2];
        });


    //文脈に応じてボタンを作成
    var context_button = document.getElementById("context_button");
    for()
    context_button.innerHTML = "Hello";

    </script>


    <!-3つ目のアプリケーション　ログの表示-!>
    <div id="log_view">
        {{ message }}
    </div>

    <script>
    var width = 1400,
        height = 800;


    var log_view = new Vue({
        el: '#log_view',
        data: {
            message: 'Hello Vue!'
        }
    })

    </script>


    <!-4つ目のアプリケーション　タブによる案件と判例のデータ表示-!>
    <div id="wound_view">
        {{ message }}
    </div>

    <script>
    var wound_view = new Vue({
        el: '#wound_view',
        data: {
            message: 'Hello Vue!'
        }
    })

    </script>


    <!-5つ目のアプリケーション　メモの入力フィード-!>
    <div id="note_view">
        {{ message }}
    </div>

    <script>
    var note_view = new Vue({
        el: '#note_view',
        data: {
            message: 'Hello Vue!'
        }
    })

    </script>

</body>
</html>
